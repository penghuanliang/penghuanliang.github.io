<!DOCTYPE html>





<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="generator" content="Hexo 3.9.0">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.3.0">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.3.0">
  <link rel="mask-icon" href="/images/logo.svg?v=7.3.0" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.3.0">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.3.0',
    exturl: false,
    sidebar: {"position":"right","display":"post","offset":12,"onmobile":false},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    save_scroll: true,
    copycode: {"enable":false,"show_result":false,"style":null},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: '复制',
      copy_success: '复制成功',
      copy_failure: '复制失败'
    }
  };
</script>

  <meta name="description" content="官网基础定义样式要创建一组样式，请在您的项目的 res/values/ 目录中保存一个 XML 文件。 可任意指定该 XML 文件的名称，但它必须使用 .xml 扩展名，并且必须保存在 res/values/ 文件夹内。 该 XML 文件的根节点必须是 &amp;lt;resources&amp;gt;。 对于您想创建的每个样式，向该文件添加一个 &amp;lt;style&amp;gt; 元素，该元素带有对样式进行唯一标识的">
<meta name="keywords" content="笔记,官网基础">
<meta property="og:type" content="article">
<meta property="og:title" content="官网基础">
<meta property="og:url" content="http://yoursite.com/2018/01/15/官网基础/index.html">
<meta property="og:site_name" content="天师">
<meta property="og:description" content="官网基础定义样式要创建一组样式，请在您的项目的 res/values/ 目录中保存一个 XML 文件。 可任意指定该 XML 文件的名称，但它必须使用 .xml 扩展名，并且必须保存在 res/values/ 文件夹内。 该 XML 文件的根节点必须是 &amp;lt;resources&amp;gt;。 对于您想创建的每个样式，向该文件添加一个 &amp;lt;style&amp;gt; 元素，该元素带有对样式进行唯一标识的">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://developer.android.google.cn/training/material/images/ThemeColors.png">
<meta property="og:updated_time" content="2018-01-15T12:52:24.846Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="官网基础">
<meta name="twitter:description" content="官网基础定义样式要创建一组样式，请在您的项目的 res/values/ 目录中保存一个 XML 文件。 可任意指定该 XML 文件的名称，但它必须使用 .xml 扩展名，并且必须保存在 res/values/ 文件夹内。 该 XML 文件的根节点必须是 &amp;lt;resources&amp;gt;。 对于您想创建的每个样式，向该文件添加一个 &amp;lt;style&amp;gt; 元素，该元素带有对样式进行唯一标识的">
<meta name="twitter:image" content="https://developer.android.google.cn/training/material/images/ThemeColors.png">
  <link rel="canonical" href="http://yoursite.com/2018/01/15/官网基础/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>官网基础 | 天师</title>
  








  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  <div class="container sidebar-position-right">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">天师</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">天下事有难易乎？为之，则难者亦易矣；不为，则易者亦难矣。</p>
      
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
      
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-主页"></i> <br>首页</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-分类"></i> <br>分类</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-归档"></i> <br>归档</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-标签"></i> <br>标签</a>

  </li>
      
      
      
        
        <li class="menu-item menu-item-about">
      
    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-关于"></i> <br>关于</a>

  </li>
  </ul>

    

</nav>
</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content page-post-detail">
            

  <div id="posts" class="posts-expand">
    

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/01/15/官网基础/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="欢亮">
      <meta itemprop="description" content="天下事有难易乎？为之，则难者亦易矣；不为，则易者亦难矣。">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="天师">
    </span>
      <header class="post-header">

        
          <h1 class="post-title" itemprop="name headline">官网基础

            
          </h1>
        

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              
                
              

              <time title="创建时间：2018-01-15 20:28:58 / 修改时间：20:52:24" itemprop="dateCreated datePublished" datetime="2018-01-15T20:28:58+08:00">2018-01-15</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/笔记/" itemprop="url" rel="index"><span itemprop="name">笔记</span></a></span>

                
                
              
            </span>
          

          
          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
              
                <span class="post-meta-item-text">本文字数：</span>
              
              <span>29k</span>
            </span>
          
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="fa fa-clock-o"></i>
              </span>
              
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              
              <span>26 分钟</span>
            </span>
          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="官网基础"><a href="#官网基础" class="headerlink" title="官网基础"></a>官网基础</h2><h5 id="定义样式"><a href="#定义样式" class="headerlink" title="定义样式"></a><strong>定义样式</strong></h5><p>要创建一组样式，请在您的项目的 <code>res/values/</code> 目录中保存一个 XML 文件。 可任意指定该 XML 文件的名称，但它必须使用 <code>.xml</code> 扩展名，并且必须保存在 <code>res/values/</code> 文件夹内。</p>
<p>该 XML 文件的根节点必须是 <code>&lt;resources&gt;</code>。</p>
<p>对于您想创建的每个样式，向该文件添加一个 <code>&lt;style&gt;</code> 元素，该元素带有对样式进行唯一标识的 <code>name</code> 属性（该属性为必需属性）。然后为该样式的每个属性添加一个 <code>&lt;item&gt;</code> 元素，该元素带有声明样式属性以及属性值的 <code>name</code>（该属性为必需属性）。 根据样式属性，<code>&lt;item&gt;</code> 的值可以是关键字字符串、十六进制颜色值、对另一资源类型的引用或其他值。以下是一个包含单个样式的示例文件：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=<span class="string">"1.0"</span> encoding=<span class="string">"utf-8"</span>?&gt;</span><br><span class="line">&lt;resources&gt;</span><br><span class="line">    &lt;style name=<span class="string">"CodeFont"</span> parent=<span class="string">"@android:style/TextAppearance.Medium"</span>&gt;</span><br><span class="line">        &lt;item name="android:layout_width"&gt;fill_parent&lt;/item&gt;</span><br><span class="line">        &lt;item name="android:layout_height"&gt;wrap_content&lt;/item&gt;</span><br><span class="line">        &lt;item name="android:textColor"&gt;#00FF00&lt;/item&gt;</span><br><span class="line">        &lt;item name="android:typeface"&gt;monospace&lt;/item&gt;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/resources&gt;</span><br></pre></td></tr></table></figure>

<p><code>&lt;resources&gt;</code> 元素的每个子项都会在编译时转换成一个应用资源对象，该对象可由 <code>&lt;style&gt;</code> 元素的 <code>name</code> 属性中的值引用。 可从 XML 布局以 <code>@style/CodeFont</code> 形式引用该示例样式（如上文引言中所示）。</p>
<p><code>&lt;style&gt;</code> 元素中的 <code>parent</code> 属性是可选属性，它指定应作为此样式所继承属性来源的另一样式的资源 ID。 如果愿意，您可在随后替换这些继承的样式属性。</p>
<p>​</p>
<h5 id="Fragment"><a href="#Fragment" class="headerlink" title="Fragment"></a>Fragment</h5><h6 id="向应用栏添加项目"><a href="#向应用栏添加项目" class="headerlink" title="向应用栏添加项目"></a><strong>向应用栏添加项目</strong></h6><p>您的片段可以通过实现 <code>onCreateOptionsMenu()</code> 向 Activity 的<a href="https://developer.android.google.cn/guide/topics/ui/menus.html#options-menu" target="_blank" rel="noopener">选项菜单</a>（并因此向<a href="https://developer.android.google.cn/training/appbar/index.html" target="_blank" rel="noopener">应用栏</a>）贡献菜单项。不过，为了使此方法能够收到调用，您必须在<code>onCreate()</code> 期间调用 <code>setHasOptionsMenu()</code>，以指示片段想要向选项菜单添加菜单项（否则，片段将不会收到对 <code>onCreateOptionsMenu()</code> 的调用）。</p>
<p>您之后从片段添加到选项菜单的任何菜单项都将追加到现有菜单项之后。 选定菜单项时，片段还会收到对 <code>onOptionsItemSelected()</code> 的回调。</p>
<p>您还可以通过调用 <code>registerForContextMenu()</code>，在片段布局中注册一个视图来提供上下文菜单。用户打开上下文菜单时，片段会收到对<code>onCreateContextMenu()</code> 的调用。当用户选择某个菜单项时，片段会收到对 <code>onContextItemSelected()</code> 的调用。</p>
<blockquote>
<p><strong>注</strong>：尽管您的片段会收到与其添加的每个菜单项对应的菜单项选定回调，但当用户选择菜单项时，Activity 会首先收到相应的回调。 如果 Activity 对菜单项选定回调的实现不会处理选定的菜单项，则系统会将事件传递到片段的回调。 这适用于选项菜单和上下文菜单。</p>
</blockquote>
<h5 id="intent"><a href="#intent" class="headerlink" title="intent"></a><strong>intent</strong></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//验证是否存在接收intent的应用</span></span><br><span class="line">PackageManager packageManager = getPackageManager();</span><br><span class="line">List activities = packageManager.queryIntentActivities(intent,</span><br><span class="line">        PackageManager.MATCH_DEFAULT_ONLY);</span><br><span class="line"><span class="keyword">boolean</span> isIntentSafe = activities.size() &gt; <span class="number">0</span>;</span><br><span class="line"><span class="comment">//添加意图选择</span></span><br><span class="line">Intent intent = <span class="keyword">new</span> Intent(Intent.ACTION_SEND);</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="comment">// Always use string resources for UI text.</span></span><br><span class="line"><span class="comment">// This says something like "Share this photo with"</span></span><br><span class="line">String title = getResources().getString(R.string.chooser_title);</span><br><span class="line"><span class="comment">// Create intent to show chooser</span></span><br><span class="line">Intent chooser = Intent.createChooser(intent, title);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Verify the intent will resolve to at least one activity</span></span><br><span class="line"><span class="keyword">if</span> (intent.resolveActivity(getPackageManager()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">    startActivity(chooser);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;！--隐式启动--&gt;</span><br><span class="line">&lt;activity android:name=<span class="string">"ShareActivity"</span>&gt;</span><br><span class="line">&lt;!-- filter <span class="keyword">for</span> sending text; accepts SENDTO action with sms URI schemes --&gt;</span><br><span class="line">&lt;intent-filter&gt;</span><br><span class="line">    &lt;action android:name=<span class="string">"android.intent.action.SENDTO"</span>/&gt;</span><br><span class="line">    &lt;category android:name=<span class="string">"android.intent.category.DEFAULT"</span>/&gt;</span><br><span class="line">    &lt;data android:scheme=<span class="string">"sms"</span> /&gt;</span><br><span class="line">    &lt;data android:scheme=<span class="string">"smsto"</span> /&gt;</span><br><span class="line">&lt;/intent-filter&gt;</span><br><span class="line">&lt;!-- filter <span class="keyword">for</span> sending text or images; accepts SEND action and text or image data --&gt;</span><br><span class="line">&lt;intent-filter&gt;</span><br><span class="line">    &lt;action android:name=<span class="string">"android.intent.action.SEND"</span>/&gt;</span><br><span class="line">    &lt;category android:name=<span class="string">"android.intent.category.DEFAULT"</span>/&gt;</span><br><span class="line">    &lt;data android:mimeType=<span class="string">"image/*"</span>/&gt;</span><br><span class="line">    &lt;data android:mimeType=<span class="string">"text/plain"</span>/&gt;</span><br><span class="line">&lt;/intent-filter&gt;</span><br><span class="line">&lt;/activity&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Get the intent that started this activity</span></span><br><span class="line"></span><br><span class="line">Intent intent = getIntent();</span><br><span class="line">Uri data = intent.getData();</span><br><span class="line"><span class="comment">// Figure out what to do based on the intent type</span></span><br><span class="line"><span class="keyword">if</span> (intent.getType().indexOf(<span class="string">"image/"</span>) != -<span class="number">1</span>) &#123;</span><br><span class="line">    <span class="comment">// Handle intents with image data ...</span></span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (intent.getType().equals(<span class="string">"text/plain"</span>)) &#123;</span><br><span class="line">    <span class="comment">// Handle intents with text ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="危险权限申请"><a href="#危险权限申请" class="headerlink" title="危险权限申请"></a><strong>危险权限申请</strong></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Here, thisActivity is the current activity</span></span><br><span class="line"><span class="keyword">if</span> (ContextCompat.checkSelfPermission(thisActivity,</span><br><span class="line">                Manifest.permission.READ_CONTACTS)</span><br><span class="line">        != PackageManager.PERMISSION_GRANTED) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Should we show an explanation?</span></span><br><span class="line">    <span class="keyword">if</span> (ActivityCompat.shouldShowRequestPermissionRationale(thisActivity,</span><br><span class="line">            Manifest.permission.READ_CONTACTS)) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Show an expanation to the user *asynchronously* -- don't block</span></span><br><span class="line">        <span class="comment">// this thread waiting for the user's response! After the user</span></span><br><span class="line">        <span class="comment">// sees the explanation, try again to request the permission.</span></span><br><span class="line"></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// No explanation needed, we can request the permission.</span></span><br><span class="line"></span><br><span class="line">        ActivityCompat.requestPermissions(thisActivity,</span><br><span class="line">                <span class="keyword">new</span> String[]&#123;Manifest.permission.READ_CONTACTS&#125;,</span><br><span class="line">                MY_PERMISSIONS_REQUEST_READ_CONTACTS);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// MY_PERMISSIONS_REQUEST_READ_CONTACTS is an</span></span><br><span class="line">        <span class="comment">// app-defined int constant. The callback method gets the</span></span><br><span class="line">        <span class="comment">// result of the request.</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//处理回调</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRequestPermissionsResult</span><span class="params">(<span class="keyword">int</span> requestCode,</span></span></span><br><span class="line"><span class="function"><span class="params">        String permissions[], <span class="keyword">int</span>[] grantResults)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">switch</span> (requestCode) &#123;</span><br><span class="line">        <span class="keyword">case</span> MY_PERMISSIONS_REQUEST_READ_CONTACTS: &#123;</span><br><span class="line">            <span class="comment">// If request is cancelled, the result arrays are empty.</span></span><br><span class="line">            <span class="keyword">if</span> (grantResults.length &gt; <span class="number">0</span></span><br><span class="line">                &amp;&amp; grantResults[<span class="number">0</span>] == PackageManager.PERMISSION_GRANTED) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// permission was granted, yay! Do the</span></span><br><span class="line">                <span class="comment">// contacts-related task you need to do.</span></span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// permission denied, boo! Disable the</span></span><br><span class="line">                <span class="comment">// functionality that depends on this permission.</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// other 'case' lines to check for other</span></span><br><span class="line">        <span class="comment">// permissions this app might request</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="文件IO"><a href="#文件IO" class="headerlink" title="文件IO"></a>文件IO</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//基础写</span></span><br><span class="line">String filename = <span class="string">"myfile"</span>;</span><br><span class="line">String string = <span class="string">"Hello world!"</span>;</span><br><span class="line">FileOutputStream outputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  outputStream = openFileOutput(filename, Context.MODE_PRIVATE);</span><br><span class="line">  outputStream.write(string.getBytes());</span><br><span class="line">  outputStream.close();</span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">  e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//临时文件</span></span><br><span class="line">String fileName = Uri.parse(url).getLastPathSegment();</span><br><span class="line">file = File.createTempFile(fileName, <span class="keyword">null</span>, context.getCacheDir());</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断外部存储是否装载</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isExternalStorageWritable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String state = Environment.getExternalStorageState();</span><br><span class="line">    <span class="keyword">if</span> (Environment.MEDIA_MOUNTED.equals(state)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断外部存储是否可读</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isExternalStorageReadable</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    String state = Environment.getExternalStorageState();</span><br><span class="line">    <span class="keyword">if</span> (Environment.MEDIA_MOUNTED.equals(state) ||</span><br><span class="line">        Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"> <span class="comment">// 指定文件外部存储目录，可以传null.</span></span><br><span class="line">    File file = <span class="keyword">new</span> File(context.getExternalFilesDir(</span><br><span class="line">            Environment.DIRECTORY_PICTURES), albumName);</span><br><span class="line"><span class="comment">//查询存储使用信息</span></span><br><span class="line">getCacheDir().getFreeSpace()</span><br><span class="line">getCacheDir().getTotalSpace()</span><br></pre></td></tr></table></figure>

<h5 id="room数据库的使用："><a href="#room数据库的使用：" class="headerlink" title="room数据库的使用："></a>room数据库的使用：</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//By default, Room creates a column for each field that's defined in the entity. </span></span><br><span class="line"><span class="comment">//If an entity has fields that you don't want to persist, you can annotate them using @Ignore. </span></span><br><span class="line"><span class="comment">//You must reference the entity class through the entities array in the Database class.</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@PrimaryKey</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String firstName;</span><br><span class="line">    <span class="keyword">public</span> String lastName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Ignore</span></span><br><span class="line">    Bitmap picture;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//复合型主键</span></span><br><span class="line"><span class="meta">@Entity</span>(primaryKeys = &#123;<span class="string">"firstName"</span>, <span class="string">"lastName"</span>&#125;)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String firstName;</span><br><span class="line">    <span class="keyword">public</span> String lastName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Ignore</span></span><br><span class="line">    Bitmap picture;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//表重命名，否则就是以类名作为表的名字  （注意：表名不区分大小写）</span></span><br><span class="line"><span class="meta">@Entity</span>(primaryKeys = &#123;<span class="string">"firstName"</span>, <span class="string">"lastName"</span>&#125;)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String firstName;</span><br><span class="line">    <span class="keyword">public</span> String lastName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Ignore</span></span><br><span class="line">    Bitmap picture;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//columnInfo 作用与tableName相似，声明的字段会作为表的列明，通过@columnInfo可修改列名</span></span><br><span class="line"><span class="meta">@Entity</span>(tableName = <span class="string">"users"</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@PrimaryKey</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ColumnInfo</span>(name = <span class="string">"first_name"</span>)</span><br><span class="line">    <span class="keyword">public</span> String firstName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ColumnInfo</span>(name = <span class="string">"last_name"</span>)</span><br><span class="line">    <span class="keyword">public</span> String lastName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Ignore</span></span><br><span class="line">    Bitmap picture;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//定义对象之间的关系（）</span></span><br><span class="line"><span class="meta">@Entity</span>(foreignKeys = <span class="meta">@ForeignKey</span>(entity = User.class,</span><br><span class="line">                                  parentColumns = <span class="string">"id"</span>,</span><br><span class="line">                                  childColumns = <span class="string">"user_id"</span>))</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Book</span> </span>&#123;</span><br><span class="line">    <span class="meta">@PrimaryKey</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> bookId;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String title;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ColumnInfo</span>(name = <span class="string">"user_id"</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> userId;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//使用注解@Embedded创建嵌套对象 （User表中包含Address的street，state,city,post_code）</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Address</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String street;</span><br><span class="line">    <span class="keyword">public</span> String state;</span><br><span class="line">    <span class="keyword">public</span> String city;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@ColumnInfo</span>(name = <span class="string">"post_code"</span>)</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> postCode;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@PrimaryKey</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">int</span> id;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String firstName;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Embedded</span></span><br><span class="line">    <span class="keyword">public</span> Address address;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="相机"><a href="#相机" class="headerlink" title="相机"></a>相机</h5><h6 id="要求相关硬件"><a href="#要求相关硬件" class="headerlink" title="要求相关硬件"></a>要求相关硬件</h6><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;manifest ... &gt;</span><br><span class="line">    &lt;uses-feature android:name=<span class="string">"android.hardware.camera"</span></span><br><span class="line">                  android:required=<span class="string">"true"</span> /&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;/manifest&gt;</span><br></pre></td></tr></table></figure>

<h6 id="简单拍照-获取缩略图"><a href="#简单拍照-获取缩略图" class="headerlink" title="简单拍照/获取缩略图"></a>简单拍照/获取缩略图</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> REQUEST_IMAGE_CAPTURE = <span class="number">1</span>;</span><br><span class="line"><span class="comment">//拍照</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dispatchTakePictureIntent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Intent takePictureIntent = <span class="keyword">new</span> Intent(MediaStore.ACTION_IMAGE_CAPTURE);</span><br><span class="line">    <span class="keyword">if</span> (takePictureIntent.resolveActivity(getPackageManager()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">        startActivityForResult(takePictureIntent, REQUEST_IMAGE_CAPTURE);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//获取缩略图</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (requestCode == REQUEST_IMAGE_CAPTURE &amp;&amp; resultCode == RESULT_OK) &#123;</span><br><span class="line">        Bundle extras = data.getExtras();</span><br><span class="line">        Bitmap imageBitmap = (Bitmap) extras.get(<span class="string">"data"</span>);</span><br><span class="line">        mImageView.setImageBitmap(imageBitmap);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="获取唯一文件"><a href="#获取唯一文件" class="headerlink" title="获取唯一文件"></a>获取唯一文件</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">String mCurrentPhotoPath;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> File <span class="title">createImageFile</span><span class="params">()</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="comment">// Create an image file name</span></span><br><span class="line">    String timeStamp = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyyMMdd_HHmmss"</span>).format(<span class="keyword">new</span> Date());</span><br><span class="line">    String imageFileName = <span class="string">"JPEG_"</span> + timeStamp + <span class="string">"_"</span>;</span><br><span class="line">    File storageDir = getExternalFilesDir(Environment.DIRECTORY_PICTURES);</span><br><span class="line">    File image = File.createTempFile(</span><br><span class="line">        imageFileName,  <span class="comment">/* prefix */</span></span><br><span class="line">        <span class="string">".jpg"</span>,         <span class="comment">/* suffix */</span></span><br><span class="line">        storageDir      <span class="comment">/* directory */</span></span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Save a file: path for use with ACTION_VIEW intents</span></span><br><span class="line">    mCurrentPhotoPath = image.getAbsolutePath();</span><br><span class="line">    <span class="keyword">return</span> image;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="拍照-原图"><a href="#拍照-原图" class="headerlink" title="拍照/原图"></a>拍照/原图</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> REQUEST_TAKE_PHOTO = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dispatchTakePictureIntent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Intent takePictureIntent = <span class="keyword">new</span> Intent(MediaStore.ACTION_IMAGE_CAPTURE);</span><br><span class="line">    <span class="comment">// Ensure that there's a camera activity to handle the intent</span></span><br><span class="line">    <span class="keyword">if</span> (takePictureIntent.resolveActivity(getPackageManager()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="comment">// Create the File where the photo should go</span></span><br><span class="line">        File photoFile = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            photoFile = createImageFile();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException ex) &#123;</span><br><span class="line">            <span class="comment">// Error occurred while creating the File</span></span><br><span class="line">            ...</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// Continue only if the File was successfully created</span></span><br><span class="line">        <span class="keyword">if</span> (photoFile != <span class="keyword">null</span>) &#123;</span><br><span class="line">            Uri photoURI = FileProvider.getUriForFile(<span class="keyword">this</span>,</span><br><span class="line">                                                  <span class="string">"com.example.android.fileprovider"</span>,</span><br><span class="line">                                                  photoFile);</span><br><span class="line">            takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, photoURI);</span><br><span class="line">            startActivityForResult(takePictureIntent, REQUEST_TAKE_PHOTO);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="通知图库更新"><a href="#通知图库更新" class="headerlink" title="通知图库更新"></a>通知图库更新</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//可以让其他应用访问</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">galleryAddPic</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Intent mediaScanIntent = <span class="keyword">new</span> Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);</span><br><span class="line">    File f = <span class="keyword">new</span> File(mCurrentPhotoPath);</span><br><span class="line">    Uri contentUri = Uri.fromFile(f);</span><br><span class="line">    mediaScanIntent.setData(contentUri);</span><br><span class="line">    <span class="keyword">this</span>.sendBroadcast(mediaScanIntent);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="尺寸压缩"><a href="#尺寸压缩" class="headerlink" title="尺寸压缩"></a>尺寸压缩</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">setPic</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Get the dimensions of the View</span></span><br><span class="line">    <span class="keyword">int</span> targetW = mImageView.getWidth();</span><br><span class="line">    <span class="keyword">int</span> targetH = mImageView.getHeight();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Get the dimensions of the bitmap</span></span><br><span class="line">    BitmapFactory.Options bmOptions = <span class="keyword">new</span> BitmapFactory.Options();</span><br><span class="line">    bmOptions.inJustDecodeBounds = <span class="keyword">true</span>;</span><br><span class="line">    BitmapFactory.decodeFile(mCurrentPhotoPath, bmOptions);</span><br><span class="line">    <span class="keyword">int</span> photoW = bmOptions.outWidth;</span><br><span class="line">    <span class="keyword">int</span> photoH = bmOptions.outHeight;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Determine how much to scale down the image</span></span><br><span class="line">    <span class="keyword">int</span> scaleFactor = Math.min(photoW/targetW, photoH/targetH);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Decode the image file into a Bitmap sized to fill the View</span></span><br><span class="line">    bmOptions.inJustDecodeBounds = <span class="keyword">false</span>;</span><br><span class="line">    bmOptions.inSampleSize = scaleFactor;</span><br><span class="line">    bmOptions.inPurgeable = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">    Bitmap bitmap = BitmapFactory.decodeFile(mCurrentPhotoPath, bmOptions);</span><br><span class="line">    mImageView.setImageBitmap(bitmap);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="调用相机录制视频"><a href="#调用相机录制视频" class="headerlink" title="调用相机录制视频"></a>调用相机录制视频</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加 &lt;uses-feature android:name="android.hardware.camera" android:required="true" /&gt;</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> REQUEST_VIDEO_CAPTURE = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">dispatchTakeVideoIntent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Intent takeVideoIntent = <span class="keyword">new</span> Intent(MediaStore.ACTION_VIDEO_CAPTURE);</span><br><span class="line">    <span class="keyword">if</span> (takeVideoIntent.resolveActivity(getPackageManager()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">        startActivityForResult(takeVideoIntent, REQUEST_VIDEO_CAPTURE);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过使用videoView播放</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent intent)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (requestCode == REQUEST_VIDEO_CAPTURE &amp;&amp; resultCode == RESULT_OK) &#123;</span><br><span class="line">        Uri videoUri = intent.getData();</span><br><span class="line">        mVideoView.setVideoURI(videoUri);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Sence"><a href="#Sence" class="headerlink" title="Sence"></a>Sence</h5><h6 id="布局生成Sence"><a href="#布局生成Sence" class="headerlink" title="布局生成Sence"></a>布局生成Sence</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Scene mAScene;</span><br><span class="line">Scene mAnotherScene;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create the scene root for the scenes in this app</span></span><br><span class="line">mSceneRoot = (ViewGroup) findViewById(R.id.scene_root);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create the scenes</span></span><br><span class="line">mAScene = Scene.getSceneForLayout(mSceneRoot, R.layout.a_scene, <span class="keyword">this</span>);</span><br><span class="line">mAnotherScene =</span><br><span class="line">    Scene.getSceneForLayout(mSceneRoot, R.layout.another_scene, <span class="keyword">this</span>);</span><br></pre></td></tr></table></figure>

<h6 id="代码创建Sence"><a href="#代码创建Sence" class="headerlink" title="代码创建Sence"></a>代码创建Sence</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Scene mScene;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Obtain the scene root element</span></span><br><span class="line">mSceneRoot = (ViewGroup) mSomeLayoutElement;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Obtain the view hierarchy to add as a child of</span></span><br><span class="line"><span class="comment">// the scene root when this scene is entered</span></span><br><span class="line">mViewHierarchy = (ViewGroup) someOtherLayoutElement;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Create a scene</span></span><br><span class="line">mScene = <span class="keyword">new</span> Scene(mSceneRoot, mViewHierarchy);</span><br></pre></td></tr></table></figure>

<h6 id="Transition的创建"><a href="#Transition的创建" class="headerlink" title="Transition的创建"></a>Transition的创建</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过布局的方式创建</span></span><br><span class="line"><span class="comment">//res/transition/fade_transition.xml</span></span><br><span class="line">&lt;fade xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span> /&gt;</span><br><span class="line"></span><br><span class="line">Transition mFadeTransition =</span><br><span class="line">        TransitionInflater.from(<span class="keyword">this</span>).</span><br><span class="line">        inflateTransition(R.transition.fade_transition);</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过代码的方式创建Transition [AutoTransition,Fade,ChangeBounds]</span></span><br><span class="line">Transition mFadeTransition = <span class="keyword">new</span> Fade();</span><br></pre></td></tr></table></figure>

<h6 id="Transition应用有场景的转换"><a href="#Transition应用有场景的转换" class="headerlink" title="Transition应用有场景的转换"></a>Transition应用有场景的转换</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通常用于不同的视图切换</span></span><br><span class="line">TransitionManager.go(mEndingScene, mFadeTransition);</span><br></pre></td></tr></table></figure>

<h6 id="Transition应用无场景的转换-TransitionManager-beginDelayedTransition-rootview-flag-用于记录视图层次结构"><a href="#Transition应用无场景的转换-TransitionManager-beginDelayedTransition-rootview-flag-用于记录视图层次结构" class="headerlink" title="Transition应用无场景的转换(TransitionManager.beginDelayedTransition(rootview,flag) 用于记录视图层次结构)"></a>Transition应用无场景的转换(TransitionManager.beginDelayedTransition(rootview,flag) 用于记录视图层次结构)</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Get the root view and create a transition</span></span><br><span class="line">mRootView = (ViewGroup) findViewById(R.id.mainLayout);</span><br><span class="line">mFade = <span class="keyword">new</span> Fade(IN);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Start recording changes to the view hierarchy</span></span><br><span class="line">TransitionManager.beginDelayedTransition(mRootView, mFade);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Add the new TextView to the view hierarchy</span></span><br><span class="line">mRootView.addView(mLabelText);</span><br><span class="line"></span><br><span class="line"><span class="comment">// When the system redraws the screen to show this update,</span></span><br><span class="line"><span class="comment">// the framework will animate the addition as a fade in</span></span><br></pre></td></tr></table></figure>

<h5 id="PageTransformer"><a href="#PageTransformer" class="headerlink" title="PageTransformer"></a>PageTransformer</h5><p>缩放效果（<a href="https://developer.android.google.cn/training/animation/anim_page_transformer_zoomout.mp4）" target="_blank" rel="noopener">https://developer.android.google.cn/training/animation/anim_page_transformer_zoomout.mp4）</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ZoomOutPageTransformer</span> <span class="keyword">implements</span> <span class="title">ViewPager</span>.<span class="title">PageTransformer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">float</span> MIN_SCALE = <span class="number">0.85f</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">float</span> MIN_ALPHA = <span class="number">0.5f</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transformPage</span><span class="params">(View view, <span class="keyword">float</span> position)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> pageWidth = view.getWidth();</span><br><span class="line">        <span class="keyword">int</span> pageHeight = view.getHeight();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (position &lt; -<span class="number">1</span>) &#123; <span class="comment">// [-Infinity,-1)</span></span><br><span class="line">            <span class="comment">// This page is way off-screen to the left.</span></span><br><span class="line">            view.setAlpha(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (position &lt;= <span class="number">1</span>) &#123; <span class="comment">// [-1,1]</span></span><br><span class="line">            <span class="comment">// Modify the default slide transition to shrink the page as well</span></span><br><span class="line">            <span class="keyword">float</span> scaleFactor = Math.max(MIN_SCALE, <span class="number">1</span> - Math.abs(position));</span><br><span class="line">            <span class="keyword">float</span> vertMargin = pageHeight * (<span class="number">1</span> - scaleFactor) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">float</span> horzMargin = pageWidth * (<span class="number">1</span> - scaleFactor) / <span class="number">2</span>;</span><br><span class="line">            <span class="keyword">if</span> (position &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                view.setTranslationX(horzMargin - vertMargin / <span class="number">2</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                view.setTranslationX(-horzMargin + vertMargin / <span class="number">2</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Scale the page down (between MIN_SCALE and 1)</span></span><br><span class="line">            view.setScaleX(scaleFactor);</span><br><span class="line">            view.setScaleY(scaleFactor);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Fade the page relative to its size.</span></span><br><span class="line">            view.setAlpha(MIN_ALPHA +</span><br><span class="line">                    (scaleFactor - MIN_SCALE) /</span><br><span class="line">                    (<span class="number">1</span> - MIN_SCALE) * (<span class="number">1</span> - MIN_ALPHA));</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// (1,+Infinity]</span></span><br><span class="line">            <span class="comment">// This page is way off-screen to the right.</span></span><br><span class="line">            view.setAlpha(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>透明效果（<a href="https://developer.android.google.cn/training/animation/anim_page_transformer_depth.mp4）" target="_blank" rel="noopener">https://developer.android.google.cn/training/animation/anim_page_transformer_depth.mp4）</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DepthPageTransformer</span> <span class="keyword">implements</span> <span class="title">ViewPager</span>.<span class="title">PageTransformer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">float</span> MIN_SCALE = <span class="number">0.75f</span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">transformPage</span><span class="params">(View view, <span class="keyword">float</span> position)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> pageWidth = view.getWidth();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (position &lt; -<span class="number">1</span>) &#123; <span class="comment">// [-Infinity,-1)</span></span><br><span class="line">            <span class="comment">// This page is way off-screen to the left.</span></span><br><span class="line">            view.setAlpha(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (position &lt;= <span class="number">0</span>) &#123; <span class="comment">// [-1,0]</span></span><br><span class="line">            <span class="comment">// Use the default slide transition when moving to the left page</span></span><br><span class="line">            view.setAlpha(<span class="number">1</span>);</span><br><span class="line">            view.setTranslationX(<span class="number">0</span>);</span><br><span class="line">            view.setScaleX(<span class="number">1</span>);</span><br><span class="line">            view.setScaleY(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (position &lt;= <span class="number">1</span>) &#123; <span class="comment">// (0,1]</span></span><br><span class="line">            <span class="comment">// Fade the page out.</span></span><br><span class="line">            view.setAlpha(<span class="number">1</span> - position);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Counteract the default slide transition</span></span><br><span class="line">            view.setTranslationX(pageWidth * -position);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Scale the page down (between MIN_SCALE and 1)</span></span><br><span class="line">            <span class="keyword">float</span> scaleFactor = MIN_SCALE</span><br><span class="line">                    + (<span class="number">1</span> - MIN_SCALE) * (<span class="number">1</span> - Math.abs(position));</span><br><span class="line">            view.setScaleX(scaleFactor);</span><br><span class="line">            view.setScaleY(scaleFactor);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// (1,+Infinity]</span></span><br><span class="line">            <span class="comment">// This page is way off-screen to the right.</span></span><br><span class="line">            view.setAlpha(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="查看大图-https-developer-android-google-cn-training-animation-anim-zoom-mp4"><a href="#查看大图-https-developer-android-google-cn-training-animation-anim-zoom-mp4" class="headerlink" title="查看大图(https://developer.android.google.cn/training/animation/anim_zoom.mp4)"></a>查看大图(<a href="https://developer.android.google.cn/training/animation/anim_zoom.mp4" target="_blank" rel="noopener">https://developer.android.google.cn/training/animation/anim_zoom.mp4</a>)</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">zoomImageFromThumb</span><span class="params">(<span class="keyword">final</span> View thumbView, <span class="keyword">int</span> imageResId)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// If there's an animation in progress, cancel it</span></span><br><span class="line">    <span class="comment">// immediately and proceed with this one.</span></span><br><span class="line">    <span class="keyword">if</span> (mCurrentAnimator != <span class="keyword">null</span>) &#123;</span><br><span class="line">        mCurrentAnimator.cancel();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Load the high-resolution "zoomed-in" image.</span></span><br><span class="line">    <span class="keyword">final</span> ImageView expandedImageView = (ImageView) findViewById(</span><br><span class="line">            R.id.expanded_image);</span><br><span class="line">    expandedImageView.setImageResource(imageResId);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Calculate the starting and ending bounds for the zoomed-in image.</span></span><br><span class="line">    <span class="comment">// This step involves lots of math. Yay, math.</span></span><br><span class="line">    <span class="keyword">final</span> Rect startBounds = <span class="keyword">new</span> Rect();</span><br><span class="line">    <span class="keyword">final</span> Rect finalBounds = <span class="keyword">new</span> Rect();</span><br><span class="line">    <span class="keyword">final</span> Point globalOffset = <span class="keyword">new</span> Point();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// The start bounds are the global visible rectangle of the thumbnail,</span></span><br><span class="line">    <span class="comment">// and the final bounds are the global visible rectangle of the container</span></span><br><span class="line">    <span class="comment">// view. Also set the container view's offset as the origin for the</span></span><br><span class="line">    <span class="comment">// bounds, since that's the origin for the positioning animation</span></span><br><span class="line">    <span class="comment">// properties (X, Y).</span></span><br><span class="line">    thumbView.getGlobalVisibleRect(startBounds);</span><br><span class="line">    findViewById(R.id.container)</span><br><span class="line">            .getGlobalVisibleRect(finalBounds, globalOffset);</span><br><span class="line">    startBounds.offset(-globalOffset.x, -globalOffset.y);</span><br><span class="line">    finalBounds.offset(-globalOffset.x, -globalOffset.y);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Adjust the start bounds to be the same aspect ratio as the final</span></span><br><span class="line">    <span class="comment">// bounds using the "center crop" technique. This prevents undesirable</span></span><br><span class="line">    <span class="comment">// stretching during the animation. Also calculate the start scaling</span></span><br><span class="line">    <span class="comment">// factor (the end scaling factor is always 1.0).</span></span><br><span class="line">    <span class="keyword">float</span> startScale;</span><br><span class="line">    <span class="keyword">if</span> ((<span class="keyword">float</span>) finalBounds.width() / finalBounds.height()</span><br><span class="line">            &gt; (<span class="keyword">float</span>) startBounds.width() / startBounds.height()) &#123;</span><br><span class="line">        <span class="comment">// Extend start bounds horizontally</span></span><br><span class="line">        startScale = (<span class="keyword">float</span>) startBounds.height() / finalBounds.height();</span><br><span class="line">        <span class="keyword">float</span> startWidth = startScale * finalBounds.width();</span><br><span class="line">        <span class="keyword">float</span> deltaWidth = (startWidth - startBounds.width()) / <span class="number">2</span>;</span><br><span class="line">        startBounds.left -= deltaWidth;</span><br><span class="line">        startBounds.right += deltaWidth;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// Extend start bounds vertically</span></span><br><span class="line">        startScale = (<span class="keyword">float</span>) startBounds.width() / finalBounds.width();</span><br><span class="line">        <span class="keyword">float</span> startHeight = startScale * finalBounds.height();</span><br><span class="line">        <span class="keyword">float</span> deltaHeight = (startHeight - startBounds.height()) / <span class="number">2</span>;</span><br><span class="line">        startBounds.top -= deltaHeight;</span><br><span class="line">        startBounds.bottom += deltaHeight;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Hide the thumbnail and show the zoomed-in view. When the animation</span></span><br><span class="line">    <span class="comment">// begins, it will position the zoomed-in view in the place of the</span></span><br><span class="line">    <span class="comment">// thumbnail.</span></span><br><span class="line">    thumbView.setAlpha(<span class="number">0f</span>);</span><br><span class="line">    expandedImageView.setVisibility(View.VISIBLE);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Set the pivot point for SCALE_X and SCALE_Y transformations</span></span><br><span class="line">    <span class="comment">// to the top-left corner of the zoomed-in view (the default</span></span><br><span class="line">    <span class="comment">// is the center of the view).</span></span><br><span class="line">    expandedImageView.setPivotX(<span class="number">0f</span>);</span><br><span class="line">    expandedImageView.setPivotY(<span class="number">0f</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Construct and run the parallel animation of the four translation and</span></span><br><span class="line">    <span class="comment">// scale properties (X, Y, SCALE_X, and SCALE_Y).</span></span><br><span class="line">    AnimatorSet set = <span class="keyword">new</span> AnimatorSet();</span><br><span class="line">    set</span><br><span class="line">            .play(ObjectAnimator.ofFloat(expandedImageView, View.X,</span><br><span class="line">                    startBounds.left, finalBounds.left))</span><br><span class="line">            .with(ObjectAnimator.ofFloat(expandedImageView, View.Y,</span><br><span class="line">                    startBounds.top, finalBounds.top))</span><br><span class="line">            .with(ObjectAnimator.ofFloat(expandedImageView, View.SCALE_X,</span><br><span class="line">            startScale, <span class="number">1f</span>)).with(ObjectAnimator.ofFloat(expandedImageView,</span><br><span class="line">                    View.SCALE_Y, startScale, <span class="number">1f</span>));</span><br><span class="line">    set.setDuration(mShortAnimationDuration);</span><br><span class="line">    set.setInterpolator(<span class="keyword">new</span> DecelerateInterpolator());</span><br><span class="line">    set.addListener(<span class="keyword">new</span> AnimatorListenerAdapter() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationEnd</span><span class="params">(Animator animation)</span> </span>&#123;</span><br><span class="line">            mCurrentAnimator = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationCancel</span><span class="params">(Animator animation)</span> </span>&#123;</span><br><span class="line">            mCurrentAnimator = <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    set.start();</span><br><span class="line">    mCurrentAnimator = set;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Upon clicking the zoomed-in image, it should zoom back down</span></span><br><span class="line">    <span class="comment">// to the original bounds and show the thumbnail instead of</span></span><br><span class="line">    <span class="comment">// the expanded image.</span></span><br><span class="line">    <span class="keyword">final</span> <span class="keyword">float</span> startScaleFinal = startScale;</span><br><span class="line">    expandedImageView.setOnClickListener(<span class="keyword">new</span> View.OnClickListener() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onClick</span><span class="params">(View view)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (mCurrentAnimator != <span class="keyword">null</span>) &#123;</span><br><span class="line">                mCurrentAnimator.cancel();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Animate the four positioning/sizing properties in parallel,</span></span><br><span class="line">            <span class="comment">// back to their original values.</span></span><br><span class="line">            AnimatorSet set = <span class="keyword">new</span> AnimatorSet();</span><br><span class="line">            set.play(ObjectAnimator</span><br><span class="line">                        .ofFloat(expandedImageView, View.X, startBounds.left))</span><br><span class="line">                        .with(ObjectAnimator</span><br><span class="line">                                .ofFloat(expandedImageView,</span><br><span class="line">                                        View.Y,startBounds.top))</span><br><span class="line">                        .with(ObjectAnimator</span><br><span class="line">                                .ofFloat(expandedImageView,</span><br><span class="line">                                        View.SCALE_X, startScaleFinal))</span><br><span class="line">                        .with(ObjectAnimator</span><br><span class="line">                                .ofFloat(expandedImageView,</span><br><span class="line">                                        View.SCALE_Y, startScaleFinal));</span><br><span class="line">            set.setDuration(mShortAnimationDuration);</span><br><span class="line">            set.setInterpolator(<span class="keyword">new</span> DecelerateInterpolator());</span><br><span class="line">            set.addListener(<span class="keyword">new</span> AnimatorListenerAdapter() &#123;</span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationEnd</span><span class="params">(Animator animation)</span> </span>&#123;</span><br><span class="line">                    thumbView.setAlpha(<span class="number">1f</span>);</span><br><span class="line">                    expandedImageView.setVisibility(View.GONE);</span><br><span class="line">                    mCurrentAnimator = <span class="keyword">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="meta">@Override</span></span><br><span class="line">                <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onAnimationCancel</span><span class="params">(Animator animation)</span> </span>&#123;</span><br><span class="line">                    thumbView.setAlpha(<span class="number">1f</span>);</span><br><span class="line">                    expandedImageView.setVisibility(View.GONE);</span><br><span class="line">                    mCurrentAnimator = <span class="keyword">null</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            set.start();</span><br><span class="line">            mCurrentAnimator = set;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="更改布局动画（添加、删除、更新）"><a href="#更改布局动画（添加、删除、更新）" class="headerlink" title="更改布局动画（添加、删除、更新）"></a>更改布局动画（添加、删除、更新）</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--在相应的布局中添加animateLayoutChanges = true--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">android:id</span>=<span class="string">"@+id/container"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:animateLayoutChanges</span>=<span class="string">"true"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">...</span></span></span><br><span class="line"><span class="tag">/&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="尺寸限定符："><a href="#尺寸限定符：" class="headerlink" title="尺寸限定符："></a>尺寸限定符：</h5><p><code>res/layout/main.xml</code>，单窗格（默认）布局：</p>
<p><code>res/layout-large/main.xml</code>，双窗格布局：    </p>
<p><code>res/layout-sw600dp/main.xml</code>，双窗格布局：（最小宽度大于或等于 600dp 的设备将选择 <code>layout-sw600dp/main.xml</code>）</p>
<p>NinePatch(.9图制作详情)</p>
<blockquote>
<p>边框沿线的黑色像素。顶部和左侧边框上的黑色像素指示可以拉伸图像的位置，右侧和底部边框上的黑色像素则指示应该放置内容的位置。</p>
</blockquote>
<p>DP</p>
<ul>
<li><code>xhdpi</code>：2.0</li>
<li><code>hdpi</code>：1.5</li>
<li><code>mdpi</code>：1.0（基准）</li>
<li><code>ldpi</code>：0.75</li>
</ul>
<h5 id="ConstraintLayout"><a href="#ConstraintLayout" class="headerlink" title="ConstraintLayout"></a>ConstraintLayout</h5><blockquote>
<p>官网有详细介绍 <a href="https://developer.android.google.cn/training/constraint-layout/index.html" target="_blank" rel="noopener">https://developer.android.google.cn/training/constraint-layout/index.html</a></p>
</blockquote>
<ul>
<li><h6 id="Toolbar"><a href="#Toolbar" class="headerlink" title="Toolbar"></a>Toolbar</h6><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">android.support.v7.widget.Toolbar</span></span></span><br><span class="line"><span class="tag">   <span class="attr">android:id</span>=<span class="string">"@+id/my_toolbar"</span></span></span><br><span class="line"><span class="tag">   <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">   <span class="attr">android:layout_height</span>=<span class="string">"?attr/actionBarSize"</span></span></span><br><span class="line"><span class="tag">   <span class="attr">android:background</span>=<span class="string">"?attr/colorPrimary"</span></span></span><br><span class="line"><span class="tag">   <span class="attr">android:elevation</span>=<span class="string">"4dp"</span> 官方推荐</span></span><br><span class="line"><span class="tag">   <span class="attr">android:theme</span>=<span class="string">"@style/ThemeOverlay.AppCompat.ActionBar"</span></span></span><br><span class="line"><span class="tag">   <span class="attr">app:popupTheme</span>=<span class="string">"@style/ThemeOverlay.AppCompat.Light"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><h6 id="SearchView"><a href="#SearchView" class="headerlink" title="SearchView"></a>SearchView</h6><blockquote>
<p>可以作为menu使用，也可以作为一个控件使用</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">android:id</span>=<span class="string">"@+id/action_search"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">android:title</span>=<span class="string">"@string/action_search"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">android:icon</span>=<span class="string">"@drawable/ic_search"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">app:showAsAction</span>=<span class="string">"ifRoom|collapseActionView"</span></span></span><br><span class="line"><span class="tag">     <span class="attr">app:actionViewClass</span>=<span class="string">"android.support.v7.widget.SearchView"</span> /&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onCreateOptionsMenu</span><span class="params">(Menu menu)</span> </span>&#123;</span><br><span class="line">    getMenuInflater().inflate(R.menu.main_activity_actions, menu);</span><br><span class="line"></span><br><span class="line">    MenuItem searchItem = menu.findItem(R.id.action_search);</span><br><span class="line">    SearchView searchView =</span><br><span class="line">            (SearchView) MenuItemCompat.getActionView(searchItem);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Configure the search info and add any event listeners...</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.onCreateOptionsMenu(menu);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//可以自定义各种状态下的icon</span></span><br><span class="line">actionView.setOnCloseListener();<span class="comment">//监听打开关闭</span></span><br><span class="line">actionView.setOnSuggestionListener();<span class="comment">//推荐列表        </span></span><br><span class="line">actionView.setOnQueryTextListener()<span class="comment">//类似文本间监听 返回false自动收起键盘</span></span><br></pre></td></tr></table></figure>
</li>
<li><h6 id="snackbar"><a href="#snackbar" class="headerlink" title="snackbar"></a><strong>snackbar</strong></h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Snackbar mySnackbar = Snackbar.make(findViewById(R.id.myCoordinatorLayout),</span><br><span class="line">								R.string.email_archived,Snackbar.LENGTH_SHORT);</span><br><span class="line">mySnackbar.setAction(R.string.undo_string, <span class="keyword">new</span> MyUndoListener());</span><br><span class="line">mySnackbar.show();</span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="管理系统界面"><a href="#管理系统界面" class="headerlink" title="管理系统界面"></a><strong>管理系统界面</strong></h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// This example uses decor view, but you can use any visible view.</span></span><br><span class="line">View decorView = getActivity().getWindow().getDecorView();</span><br><span class="line"><span class="keyword">int</span> uiOptions = View.SYSTEM_UI_FLAG_LOW_PROFILE;</span><br><span class="line">decorView.setSystemUiVisibility(uiOptions);</span><br><span class="line"></span><br><span class="line">View decorView = getActivity().getWindow().getDecorView();</span><br><span class="line"><span class="comment">// Calling setSystemUiVisibility() with a value of 0 clears</span></span><br><span class="line"><span class="comment">// all flags.</span></span><br><span class="line">decorView.setSystemUiVisibility(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>
</li>
<li><h6 id="隐藏状态栏"><a href="#隐藏状态栏" class="headerlink" title="隐藏状态栏"></a>隐藏状态栏</h6><p>当失去焦点时会无效，比如触摸其他，后台重新进入界面</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">View decorView = getWindow().getDecorView();</span><br><span class="line"><span class="comment">// Hide the status bar.</span></span><br><span class="line"><span class="keyword">int</span> uiOptions = View.SYSTEM_UI_FLAG_FULLSCREEN;</span><br><span class="line">decorView.setSystemUiVisibility(uiOptions);</span><br><span class="line"><span class="comment">// Remember that you should never show the action bar if the</span></span><br><span class="line"><span class="comment">// status bar is hidden, so hide that too if necessary.</span></span><br><span class="line">ActionBar actionBar = getActionBar();</span><br><span class="line">actionBar.hide();</span><br><span class="line"></span><br><span class="line"><span class="comment">//配合setFitsSystemWindows()</span></span><br><span class="line">View.SYSTEM_UI_FLAG_FULLSCREEN | <span class="comment">//隐藏状态栏</span></span><br><span class="line">View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN| <span class="comment">//内容填充状态栏</span></span><br><span class="line">View.SYSTEM_UI_FLAG_LAYOUT_STABLE| <span class="comment">//保持布局稳定</span></span><br><span class="line">View.SYSTEM_UI_FLAG_HIDE_NAVIGATION|<span class="comment">//隐藏导航虚拟按键</span></span><br><span class="line">View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION|<span class="comment">//内容填充导航虚拟按键</span></span><br><span class="line">View.SYSTEM_UI_FLAG_IMMERSIVE|<span class="comment">//沉浸式全屏</span></span><br><span class="line">View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY<span class="comment">//沉浸式全屏 划出状态栏，状态栏会自动消失</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//处理状态栏被显示的问题</span></span><br><span class="line">getWindow().getDecorView().setOnSystemUiVisibilityChangeListener</span><br><span class="line">onWindowFocusChanged()</span><br><span class="line">  </span><br><span class="line">mDecorView.setOnSystemUiVisibilityChangeListener(<span class="keyword">new</span> View.OnSystemUiVisibilityChangeListener() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onSystemUiVisibilityChange</span><span class="params">(<span class="keyword">int</span> visibility)</span> </span>&#123;</span><br><span class="line">                <span class="comment">// Note that system bars will only be "visible" if none of the</span></span><br><span class="line">                <span class="comment">// LOW_PROFILE, HIDE_NAVIGATION, or FULLSCREEN flags are set.</span></span><br><span class="line">                <span class="keyword">if</span> ((visibility &amp; View.SYSTEM_UI_FLAG_FULLSCREEN) == <span class="number">0</span>) &#123;</span><br><span class="line">                    <span class="comment">// <span class="doctag">TODO:</span> The system bars are visible. Make any desired</span></span><br><span class="line">                    <span class="comment">// adjustments to your UI, such as showing the action bar or</span></span><br><span class="line">                    <span class="comment">// other navigational controls.</span></span><br><span class="line">                  </span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="comment">// <span class="doctag">TODO:</span> The system bars are NOT visible. Make any desired</span></span><br><span class="line">                    <span class="comment">// adjustments to your UI, such as hiding the action bar or</span></span><br><span class="line">                    <span class="comment">// other navigational controls.</span></span><br><span class="line">                  </span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="Material-Design"><a href="#Material-Design" class="headerlink" title="Material Design"></a>Material Design</h5><p>定制状态栏</p>
<p><img src="https://developer.android.google.cn/training/material/images/ThemeColors.png" alt="状态栏"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//当recycleview宽高不变时增删改查时提高性能</span></span><br><span class="line">mRecyclerView.setHasFixedSize(<span class="keyword">true</span>);</span><br></pre></td></tr></table></figure>

<p>阴影</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Z = elevation + translationZ</span><br><span class="line"><span class="comment">//自定义阴影轮廓，因为实际轮廓都是正方形</span></span><br><span class="line">扩展 ViewOutlineProvider 类别。</span><br><span class="line">替代 getOutline() 方法。</span><br><span class="line">利用 View.setOutlineProvider() 方法向您的视图指定新的轮廓提供程序。</span><br></pre></td></tr></table></figure>
</li>
<li><h5 id="定制动画"><a href="#定制动画" class="headerlink" title="定制动画"></a><strong>定制动画</strong></h5><h6 id="触摸反馈（水波纹）"><a href="#触摸反馈（水波纹）" class="headerlink" title="触摸反馈（水波纹）"></a>触摸反馈（水波纹）</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//矩形边框水波纹</span></span><br><span class="line">android:background=<span class="string">"?android:attr/selectableItemBackground"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//无边框限制水波纹</span></span><br><span class="line">android:background=<span class="string">"?android:attr/selectableItemBackgroundBorderless"</span></span><br></pre></td></tr></table></figure>

<h6 id="自定义水波纹"><a href="#自定义水波纹" class="headerlink" title="自定义水波纹"></a>自定义水波纹</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Creates a new ripple drawable with the specified ripple color and</span></span><br><span class="line"><span class="comment"> * optional content and mask drawables.</span></span><br><span class="line"><span class="comment"> * 通过指定波纹的颜色、操作内容、蒙板边界 创建新的ripple drawable 。</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> color The ripple color  波纹颜色 </span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> content The content drawable, may be &#123;<span class="doctag">@code</span> null&#125; 指定content drawable</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> mask The mask drawable, may be &#123;<span class="doctag">@code</span> null&#125;  蒙板边界 、为null时，无边界</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="title">RippleDrawable</span><span class="params">(@NonNull ColorStateList color, @Nullable Drawable content,</span></span></span><br><span class="line"><span class="function"><span class="params">        @Nullable Drawable mask)</span> </span>&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line">RippleDrawable rd = <span class="keyword">new</span> RippleDrawable(</span><br><span class="line">		ColorStateList.valueOf(</span><br><span class="line">      	getResources().getColor(R.color.bg_gray)),</span><br><span class="line">      	drawable, </span><br><span class="line">      	getShape()</span><br><span class="line">      );</span><br><span class="line">tvColor.setBackgroundDrawable(rd);</span><br></pre></td></tr></table></figure>

<h6 id="揭露动画"><a href="#揭露动画" class="headerlink" title="揭露动画"></a>揭露动画</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// create the animator for this view (the start radius is zero)</span></span><br><span class="line">Animator anim =</span><br><span class="line">    ViewAnimationUtils.createCircularReveal(myView, cx, cy, <span class="number">0</span>, finalRadius);</span><br></pre></td></tr></table></figure>

<p>​</p>
</li>
</ul>

    </div>

    
    
    
        
      

      <footer class="post-footer">
          
            
          
          <div class="post-tags">
            
              <a href="/tags/笔记/" rel="tag"># 笔记</a>
            
              <a href="/tags/官网基础/" rel="tag"># 官网基础</a>
            
          </div>
        

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2018/01/07/动画/" rel="next" title="动画">
                  <i class="fa fa-chevron-left"></i> 动画
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/2018/04/09/反射笔记/" rel="prev" title="反射笔记">
                  反射笔记 <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </div>
  
  
  
  </article>

  </div>


          </div>
          

        </div>
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">

          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/images/avatar.jpg"
      alt="欢亮">
  <p class="site-author-name" itemprop="name">欢亮</p>
  <div class="site-description motion-element" itemprop="description">天下事有难易乎？为之，则难者亦易矣；不为，则易者亦难矣。</div>
</div>
  <nav class="site-state motion-element">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">分类</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        <span class="site-state-item-count">10</span>
        <span class="site-state-item-name">标签</span>
        </a>
      </div>
    
  </nav>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="https://github.com/penghuanliang" title="GitHub &rarr; https://github.com/penghuanliang" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
    
      <span class="links-of-author-item">
      
      
        
      
      
        
      
        <a href="mailto:1092860160@qq.com" title="E-Mail &rarr; mailto:1092860160@qq.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
      </span>
    
  </div>


  <div class="links-of-blogroll motion-element links-of-blogroll-block">
    <div class="links-of-blogroll-title">
      <i class="fa  fa-fw fa-link"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://songsongtao.github.io/" title="https://songsongtao.github.io/" rel="noopener" target="_blank">二松同学</a>
        </li>
      
    </ul>
  </div>

        </div>
      </div>
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#官网基础"><span class="nav-number">1.</span> <span class="nav-text">官网基础</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#定义样式"><span class="nav-number">1.0.0.1.</span> <span class="nav-text">定义样式</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Fragment"><span class="nav-number">1.0.0.2.</span> <span class="nav-text">Fragment</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#向应用栏添加项目"><span class="nav-number">1.0.0.2.1.</span> <span class="nav-text">向应用栏添加项目</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#intent"><span class="nav-number">1.0.0.3.</span> <span class="nav-text">intent</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#危险权限申请"><span class="nav-number">1.0.0.4.</span> <span class="nav-text">危险权限申请</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#文件IO"><span class="nav-number">1.0.0.5.</span> <span class="nav-text">文件IO</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#room数据库的使用："><span class="nav-number">1.0.0.6.</span> <span class="nav-text">room数据库的使用：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#相机"><span class="nav-number">1.0.0.7.</span> <span class="nav-text">相机</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#要求相关硬件"><span class="nav-number">1.0.0.7.1.</span> <span class="nav-text">要求相关硬件</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#简单拍照-获取缩略图"><span class="nav-number">1.0.0.7.2.</span> <span class="nav-text">简单拍照/获取缩略图</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#获取唯一文件"><span class="nav-number">1.0.0.7.3.</span> <span class="nav-text">获取唯一文件</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#拍照-原图"><span class="nav-number">1.0.0.7.4.</span> <span class="nav-text">拍照/原图</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#通知图库更新"><span class="nav-number">1.0.0.7.5.</span> <span class="nav-text">通知图库更新</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#尺寸压缩"><span class="nav-number">1.0.0.7.6.</span> <span class="nav-text">尺寸压缩</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#调用相机录制视频"><span class="nav-number">1.0.0.7.7.</span> <span class="nav-text">调用相机录制视频</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Sence"><span class="nav-number">1.0.0.8.</span> <span class="nav-text">Sence</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#布局生成Sence"><span class="nav-number">1.0.0.8.1.</span> <span class="nav-text">布局生成Sence</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#代码创建Sence"><span class="nav-number">1.0.0.8.2.</span> <span class="nav-text">代码创建Sence</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Transition的创建"><span class="nav-number">1.0.0.8.3.</span> <span class="nav-text">Transition的创建</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Transition应用有场景的转换"><span class="nav-number">1.0.0.8.4.</span> <span class="nav-text">Transition应用有场景的转换</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#Transition应用无场景的转换-TransitionManager-beginDelayedTransition-rootview-flag-用于记录视图层次结构"><span class="nav-number">1.0.0.8.5.</span> <span class="nav-text">Transition应用无场景的转换(TransitionManager.beginDelayedTransition(rootview,flag) 用于记录视图层次结构)</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#PageTransformer"><span class="nav-number">1.0.0.9.</span> <span class="nav-text">PageTransformer</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#查看大图-https-developer-android-google-cn-training-animation-anim-zoom-mp4"><span class="nav-number">1.0.0.10.</span> <span class="nav-text">查看大图(https://developer.android.google.cn/training/animation/anim_zoom.mp4)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#更改布局动画（添加、删除、更新）"><span class="nav-number">1.0.0.11.</span> <span class="nav-text">更改布局动画（添加、删除、更新）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#尺寸限定符："><span class="nav-number">1.0.0.12.</span> <span class="nav-text">尺寸限定符：</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#ConstraintLayout"><span class="nav-number">1.0.0.13.</span> <span class="nav-text">ConstraintLayout</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#Toolbar"><span class="nav-number">1.0.0.13.1.</span> <span class="nav-text">Toolbar</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#SearchView"><span class="nav-number">1.0.0.13.2.</span> <span class="nav-text">SearchView</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#snackbar"><span class="nav-number">1.0.0.13.3.</span> <span class="nav-text">snackbar</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#管理系统界面"><span class="nav-number">1.0.0.14.</span> <span class="nav-text">管理系统界面</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#隐藏状态栏"><span class="nav-number">1.0.0.14.1.</span> <span class="nav-text">隐藏状态栏</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Material-Design"><span class="nav-number">1.0.0.15.</span> <span class="nav-text">Material Design</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#定制动画"><span class="nav-number">1.0.0.16.</span> <span class="nav-text">定制动画</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#触摸反馈（水波纹）"><span class="nav-number">1.0.0.16.1.</span> <span class="nav-text">触摸反馈（水波纹）</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#自定义水波纹"><span class="nav-number">1.0.0.16.2.</span> <span class="nav-text">自定义水波纹</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#揭露动画"><span class="nav-number">1.0.0.16.3.</span> <span class="nav-text">揭露动画</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">欢亮</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="站点总字数">121k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">1:50</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.9.0</div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.3.0</div>

        








        
      </div>
    </footer>
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
      </div>

    

  </div>

  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

<script src="/js/utils.js?v=7.3.0"></script>
  <script src="/js/motion.js?v=7.3.0"></script>


  <script src="/js/schemes/muse.js?v=7.3.0"></script>


<script src="/js/next-boot.js?v=7.3.0"></script>




  




























  

  

  


  
  <script src="/js/scrollspy.js?v=7.3.0"></script>
<script src="/js/post-details.js?v=7.3.0"></script>


</body>
</html>
